{"version":3,"sources":["src/luxyflux.js"],"names":[],"mappings":"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","file":"src/luxyflux.js","sourcesContent":["import Dispatcher from './dispatcher';\nimport ActionCreators from './actioncreators';\nimport Store from './store';\n\nexport {\n\tDispatcher, ActionCreators, Store\n};\n\nexport var defaultStoreConfig = {\n\tdispatcher: Dispatcher.current,\n\tname: null,\n\thandlers: {},\n\tinitialize: () => {},\n\tdecorate: null\n};\n\nexport var defaultActionCreatorsConfig = {\n\tdispatcher: Dispatcher.current,\n\tserviceActions: {},\n\tdecorate: null\n};\n\nexport class LuxyFlux {\n\tstatic createStore(config, StoreCls = Store) {\n\t\tconfig = Object.assign({}, defaultStoreConfig, config);\n\n\t\tvar {\n\t\t\tname, dispatcher, handlers, initialize, decorate\n\t\t} = config;\n\t\tdelete config.name;\n\t\tdelete config.dispatcher;\n\t\tdelete config.handlers;\n\t\tdelete config.initialize;\n\t\tdelete config.decorate;\n\n\t\tvar source = decorate || config;\n\t\tif (decorate) {\n\t\t\thandlers = Object.assign({}, handlers, decorate.handlers || {});\n\t\t}\n\n\t\tfor (let [actionType, handlerName] of _entries(handlers)) {\n\t\t\tlet handler = source[handlerName];\n\t\t\tif (handler instanceof Function) {\n\t\t\t\thandlers[actionType] = source[handlerName];\n\t\t\t}\n\t\t}\n\n\t\tif (decorate) {\n\t\t\tStoreCls.decorate(decorate, name, dispatcher, handlers);\n\t\t\treturn decorate;\n\t\t} else {\n\t\t\treturn new StoreCls(name, dispatcher, handlers, initialize);\n\t\t}\n\t}\n\n\tstatic createActions(config, ActionCreatorsCls = ActionCreators) {\n\t\tconfig = Object.assign({}, defaultActionCreatorsConfig, config);\n\n\t\tvar {\n\t\t\tdispatcher, serviceActions, decorate\n\t\t} = config;\n\t\tdelete config.dispatcher;\n\t\tdelete config.serviceActions;\n\t\tdelete config.decorate;\n\n\t\tvar source = decorate || config;\n\t\tif (decorate) {\n\t\t\tserviceActions = Object.assign({}, serviceActions, decorate.serviceActions || {});\n\t\t}\n\n\t\tfor (let [actionType, actionName] of _entries(serviceActions)) {\n\t\t\tlet action = source[actionName];\n\t\t\tif (action instanceof Function) {\n\t\t\t\tlet serviceAction = ActionCreatorsCls.createServiceAction(\n\t\t\t\t\tdispatcher, actionType, action);\n\n\t\t\t\tObject.defineProperty(source, actionName, {\n\t\t\t\t\twritable: false,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\tvalue: serviceAction\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (decorate) {\n\t\t\tActionCreatorsCls.decorate(decorate, dispatcher);\n\t\t\treturn decorate;\n\t\t} else {\n\t\t\treturn new ActionCreatorsCls(dispatcher, source);\n\t\t}\n\t}\n}\nexport default LuxyFlux;\n\n// using a generator function\nfunction* _entries(obj) {\n\tfor (let key of Object.keys(obj)) {\n\t\tyield [key, obj[key]];\n\t}\n}\n"]}