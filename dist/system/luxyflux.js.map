{"version":3,"sources":["src/luxyflux.js"],"names":[],"mappings":"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","file":"src/luxyflux.js","sourcesContent":["import Dispatcher from './Dispatcher';\nimport ActionCreators from './ActionCreators';\nimport Store from './Store';\n\nexport {Dispatcher, ActionCreators, Store};\n\nexport var defaultStoreConfig = {\n    dispatcher: Dispatcher.current,\n    name: null,\n    handlers: {},\n    initialize: ()=>{},\n    decorate: null\n};\n\nexport var defaultActionCreatorsConfig = {\n    dispatcher: Dispatcher.current,\n    serviceActions: {},\n    decorate: null\n};\n\nexport class LuxyFlux {\n    static createStore(config) {\n        config = Object.assign({}, defaultStoreConfig, config);\n\n        var {name, dispatcher, handlers, initialize, decorate} = config;\n        delete config.name;\n        delete config.dispatcher;\n        delete config.handlers;\n        delete config.initialize;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            handlers = Object.assign({}, handlers, decorate.handlers || {});\n        }\n\n        for (let [actionType, handlerName] of _entries(handlers)) {\n            let handler = source[handlerName];\n            if (handler instanceof Function) {\n                handlers[actionType] = source[handlerName];\n            }\n        }\n\n        if (decorate) {\n            Store.decorate(decorate, name, dispatcher, handlers);\n            return decorate;\n        } else {\n            return new Store(name, dispatcher, handlers, initialize);\n        }\n    }\n\n    static createActions(config) {\n        config = Object.assign({}, defaultActionCreatorsConfig, config);\n\n        var {dispatcher, serviceActions, decorate} = config;\n        delete config.dispatcher;\n        delete config.serviceActions;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            serviceActions = Object.assign({}, serviceActions, decorate.serviceActions || {});\n        }\n\n        for (let [actionType, actionName] of _entries(serviceActions)) {\n            let action = source[actionName];\n            if (action instanceof Function) {\n                let serviceAction = ActionCreators.createServiceAction(\n                    dispatcher, actionType, action);\n\n                Object.defineProperty(source, actionName, {\n                    writable: false,\n                    enumerable: false,\n                    value: serviceAction\n                });\n            }\n        }\n\n        if (decorate) {\n            ActionCreators.decorate(decorate, dispatcher);\n            return decorate;\n        } else {\n            return new ActionCreators(dispatcher, source);\n        }\n    }\n\n    static dispatchAction(action, payload) {\n        return Dispatcher.current.dispatch(action, payload);\n    }\n}\nexport default LuxyFlux;\n\n// using a generator function\nfunction* _entries(obj) {\n   for (let key of Object.keys(obj)) {\n     yield [key, obj[key]];\n   }\n}\n"]}