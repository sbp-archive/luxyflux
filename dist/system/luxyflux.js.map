{"version":3,"sources":["src/luxyflux.js"],"names":[],"mappings":"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","file":"src/luxyflux.js","sourcesContent":["import Dispatcher from './dispatcher';\nimport ActionCreators from './actioncreators';\nimport Store from './store';\n\nexport {\n    Dispatcher, ActionCreators, Store\n};\n\nexport var defaultStoreConfig = {\n    dispatcher: Dispatcher.current,\n    name: null,\n    handlers: {},\n    initialize: () => {},\n    decorate: null\n};\n\nexport var defaultActionCreatorsConfig = {\n    dispatcher: Dispatcher.current,\n    serviceActions: {},\n    decorate: null\n};\n\nexport class LuxyFlux {\n    static createStore(config, StoreCls = Store) {\n        config = Object.assign({}, defaultStoreConfig, config);\n\n        var {\n            name, dispatcher, handlers, initialize, decorate\n        } = config;\n        delete config.name;\n        delete config.dispatcher;\n        delete config.handlers;\n        delete config.initialize;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            handlers = Object.assign({}, handlers, decorate.handlers || {});\n        }\n\n        for (let [actionType, handlerName] of _entries(handlers)) {\n            let handler = source[handlerName];\n            if (handler instanceof Function) {\n                handlers[actionType] = source[handlerName];\n            }\n        }\n\n        if (decorate) {\n            StoreCls.decorate(decorate, name, dispatcher, handlers);\n            return decorate;\n        } else {\n            return new StoreCls(name, dispatcher, handlers, initialize);\n        }\n    }\n\n    static createActions(config, ActionCreatorsCls = ActionCreators) {\n        config = Object.assign({}, defaultActionCreatorsConfig, config);\n\n        var {\n            dispatcher, serviceActions, decorate\n        } = config;\n        delete config.dispatcher;\n        delete config.serviceActions;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            serviceActions = Object.assign({}, serviceActions, decorate.serviceActions || {});\n        }\n\n        for (let [actionType, actionName] of _entries(serviceActions)) {\n            let action = source[actionName];\n            if (action instanceof Function) {\n                let serviceAction = ActionCreatorsCls.createServiceAction(\n                    dispatcher, actionType, action);\n\n                Object.defineProperty(source, actionName, {\n                    writable: false,\n                    enumerable: false,\n                    value: serviceAction\n                });\n            }\n        }\n\n        if (decorate) {\n            ActionCreatorsCls.decorate(decorate, dispatcher);\n            return decorate;\n        } else {\n            return new ActionCreatorsCls(dispatcher, source);\n        }\n    }\n}\nexport default LuxyFlux;\n\n// using a generator function\nfunction* _entries(obj) {\n    for (let key of Object.keys(obj)) {\n        yield [key, obj[key]];\n    }\n}\n"]}