{"version":3,"sources":["src/luxyflux.js"],"names":[],"mappings":"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","file":"src/luxyflux.js","sourcesContent":["import Dispatcher from './dispatcher';\nimport ActionCreators from './actioncreators';\nimport Store from './store';\n\nexport {\n\tDispatcher, ActionCreators, Store\n};\n\nexport var defaultStoreConfig = {\n\tdispatcher: Dispatcher.current,\n\tname: null,\n\thandlers: {},\n\tinitialize: () => {},\n\tdecorate: null\n};\n\nexport var defaultActionCreatorsConfig = {\n\tdispatcher: Dispatcher.current,\n\tserviceActions: {},\n\tdecorate: null\n};\n\nexport class LuxyFlux {\n\tstatic createStore(config, StoreCls = Store) {\n\t\tconfig = Object.assign({}, defaultStoreConfig, config);\n\n\t\tvar {\n\t\t\tname, dispatcher, handlers, initialize, decorate\n\t\t} = config;\n\t\tdelete config.name;\n\t\tdelete config.dispatcher;\n\t\tdelete config.handlers;\n\t\tdelete config.initialize;\n\t\tdelete config.decorate;\n\n\t\tvar source = decorate || config;\n\t\tif (decorate) {\n\t\t\thandlers = Object.assign({}, handlers, decorate.handlers || {});\n\t\t}\n\n\t\tfor (let [actionType, handlerName] of _entries(handlers)) {\n\t\t\tlet handler = source[handlerName];\n\t\t\tif (handler instanceof Function) {\n\t\t\t\thandlers[actionType] = source[handlerName];\n\t\t\t}\n\t\t}\n\n\t\tif (decorate) {\n\t\t\tStoreCls.decorate(decorate, name, dispatcher, handlers);\n\t\t\treturn decorate;\n\t\t} else {\n\t\t\treturn new StoreCls(name, dispatcher, handlers, initialize);\n\t\t}\n\t}\n\n\tstatic createActions(config, ActionCreatorsCls = ActionCreators) {\n\t\tconfig = Object.assign({}, defaultActionCreatorsConfig, config);\n\n\t\tvar {\n\t\t\tdispatcher, serviceActions, decorate\n\t\t} = config;\n\t\tdelete config.dispatcher;\n\t\tdelete config.serviceActions;\n\t\tdelete config.decorate;\n\n\t\tvar source = decorate || config;\n\t\tif (decorate) {\n\t\t\tserviceActions = Object.assign({}, serviceActions, decorate.serviceActions || {});\n\t\t}\n\n\t\tfor (let [actionType, actionName] of _entries(serviceActions)) {\n\t\t\tlet action = source[actionName];\n\t\t\tif (action instanceof Function) {\n\t\t\t\tlet serviceAction = ActionCreatorsCls.createServiceAction(\n\t\t\t\t\tdispatcher, actionType, action);\n\n\t\t\t\tObject.defineProperty(source, actionName, {\n\t\t\t\t\twritable: false,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\tvalue: serviceAction\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (decorate) {\n\t\t\tActionCreatorsCls.decorate(decorate, dispatcher);\n\t\t\treturn decorate;\n\t\t} else {\n\t\t\treturn new ActionCreatorsCls(dispatcher, source);\n\t\t}\n\t}\n}\nexport default LuxyFlux;\n\n// using a generator function\nfunction* _entries(obj) {\n\tfor (let key of Object.keys(obj)) {\n\t\tyield [key, obj[key]];\n\t}\n}\n"]}