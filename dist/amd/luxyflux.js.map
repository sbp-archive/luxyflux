{"version":3,"sources":["../../src/luxyflux.js"],"names":[],"mappings":"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","file":"luxyflux.js","sourcesContent":["import Dispatcher from './dispatcher';\nimport ActionCreators from './actioncreators';\nimport Store from './store';\n\nexport {\n    Dispatcher, ActionCreators, Store\n};\n\nexport var defaultStoreConfig = {\n    dispatcher: Dispatcher.current,\n    name: null,\n    handlers: {},\n    initialize: () => {},\n    decorate: null\n};\n\nexport var defaultActionCreatorsConfig = {\n    dispatcher: Dispatcher.current,\n    serviceActions: {},\n    decorate: null\n};\n\nexport class LuxyFlux {\n    static createStore(config, StoreCls = Store) {\n        config = Object.assign({}, defaultStoreConfig, config);\n\n        var {\n            name, dispatcher, handlers, initialize, decorate\n        } = config;\n        delete config.name;\n        delete config.dispatcher;\n        delete config.handlers;\n        delete config.initialize;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            handlers = Object.assign({}, handlers, decorate.handlers || {});\n        }\n\n        for (let [actionType, handlerName] of _entries(handlers)) {\n            let handler = source[handlerName];\n            if (handler instanceof Function) {\n                handlers[actionType] = source[handlerName];\n            }\n        }\n\n        if (decorate) {\n            StoreCls.decorate(decorate, name, dispatcher, handlers);\n            return decorate;\n        } else {\n            return new StoreCls(name, dispatcher, handlers, initialize);\n        }\n    }\n\n    static createActions(config, ActionCreatorsCls = ActionCreators) {\n        config = Object.assign({}, defaultActionCreatorsConfig, config);\n\n        var {\n            dispatcher, serviceActions, decorate\n        } = config;\n        delete config.dispatcher;\n        delete config.serviceActions;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            serviceActions = Object.assign({}, serviceActions, decorate.serviceActions || {});\n        }\n\n        for (let [actionType, actionName] of _entries(serviceActions)) {\n            let action = source[actionName];\n            if (action instanceof Function) {\n                let serviceAction = ActionCreatorsCls.createServiceAction(\n                    dispatcher, actionType, action);\n\n                Object.defineProperty(source, actionName, {\n                    writable: false,\n                    enumerable: false,\n                    value: serviceAction\n                });\n            }\n        }\n\n        if (decorate) {\n            ActionCreatorsCls.decorate(decorate, dispatcher);\n            return decorate;\n        } else {\n            return new ActionCreatorsCls(dispatcher, source);\n        }\n    }\n}\nexport default LuxyFlux;\n\n// using a generator function\nfunction* _entries(obj) {\n    for (let key of Object.keys(obj)) {\n        yield [key, obj[key]];\n    }\n}\n"]}