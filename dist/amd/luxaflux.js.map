{"version":3,"sources":["src/luxaflux.js"],"names":[],"mappings":"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","file":"src/luxaflux.js","sourcesContent":["import Dispatcher from './Dispatcher';\nimport ActionCreators from './ActionCreators';\nimport Store from './Store';\n\nexport {Dispatcher, ActionCreators, Store};\n\nexport var defaultStoreConfig = {\n    dispatcher: Dispatcher.current,\n    name: null,\n    handlers: {},\n    initialize: ()=>{},\n    decorate: null\n};\n\nexport var defaultActionCreatorsConfig = {\n    dispatcher: Dispatcher.current,\n    serviceActions: {},\n    decorate: null\n};\n\nexport class LuxaFlux {\n    static createStore(config) {\n        config = Object.assign({}, defaultStoreConfig, config);\n\n        var {name, dispatcher, handlers, initialize, decorate} = config;\n        delete config.name;\n        delete config.dispatcher;\n        delete config.handlers;\n        delete config.initialize;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            handlers = Object.assign({}, handlers, decorate.handlers || {});\n        }\n\n        for (let [actionType, handlerName] of _entries(handlers)) {\n            let handler = source[handlerName];\n            if (handler instanceof Function) {\n                handlers[actionType] = source[handlerName];\n            }\n        }\n\n        if (decorate) {\n            Store.decorate(decorate, name, dispatcher, handlers);\n            return decorate;\n        } else {\n            return new Store(name, dispatcher, handlers, initialize);\n        }\n    }\n\n    static createActions(config) {\n        config = Object.assign({}, defaultActionCreatorsConfig, config);\n\n        var {dispatcher, serviceActions, decorate} = config;\n        delete config.dispatcher;\n        delete config.serviceActions;\n        delete config.decorate;\n\n        var source = decorate || config;\n        if (decorate) {\n            serviceActions = Object.assign({}, serviceActions, decorate.serviceActions || {});\n        }\n\n        for (let [actionType, actionName] of _entries(serviceActions)) {\n            let action = source[actionName];\n            if (action instanceof Function) {\n                let serviceAction = ActionCreators.createServiceAction(\n                    dispatcher, actionType, action);\n\n                Object.defineProperty(source, actionName, {\n                    writable: false,\n                    enumerable: false,\n                    value: serviceAction\n                });\n            }\n        }\n\n        if (decorate) {\n            ActionCreators.decorate(decorate, dispatcher);\n            return decorate;\n        } else {\n            return new ActionCreators(dispatcher, source);\n        }\n    }\n\n    static dispatchAction(action, payload) {\n        return Dispatcher.current.dispatch(action, payload);\n    }\n}\nexport default LuxaFlux;\n\n// using a generator function\nfunction* _entries(obj) {\n   for (let key of Object.keys(obj)) {\n     yield [key, obj[key]];\n   }\n}\n"]}